{"version":3,"sources":["ng://@ngeth/utils/lib/utils/bn.ts","ng://@ngeth/utils/lib/utils/keccack.ts","ng://@ngeth/utils/lib/utils/hex.ts","ng://@ngeth/utils/lib/formatters/block.ts","ng://@ngeth/utils/lib/formatters/transaction.ts","ng://@ngeth/utils/lib/formatters/tx-logs.ts","ng://@ngeth/utils/lib/formatters/tx-receipt.ts","ng://@ngeth/utils/lib/formatters/tx-object.ts","ng://@ngeth/utils/lib/utils/block.ts"],"names":["isBN","object","BN","constructor","name","isBigNumber","toBN","number","arg","multiplier","formattedString","String","toLowerCase","trim","isPrefixed","substr","stringArg","stripHexPrefix","slice","match","mul","toString","Error","JSON","stringify","apply","arguments","e","str","isHexPrefixed","bits","HEX_CHARS","split","KECCAK_PADDING","SHIFT","RC","f","s","h","l","n","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","b16","b17","b18","b19","b20","b21","b22","b23","b24","b25","b26","b27","b28","b29","b30","b31","b32","b33","b34","b35","b36","b37","b38","b39","b40","b41","b42","b43","b44","b45","b46","b47","b48","b49","keccak256","msg","i","length","push","parseInt","state","message","code","blocks","byteCount","blockCount","outputBlocks","index","reset","block","start","charCodeAt","lastByteIndex","hex","j","update","concat","isAddress","address","test","checkAddressChecksum","addressHash","sha3","replace","toUpperCase","SHA3_NULL_S","value","isHexStrict","hexToBytes","returnValue","utf8ToHex","utf8.encode","reverse","join","hexToNumber","toNumber","numberToHex","isFinite","result","lt","bytes","c","Block","ethBlock","this","hash","parentHash","nonce","sha3Uncles","logsBloom","transactionsRoot","stateRoot","receiptsRoot","miner","difficulty","totalDifficulty","size","extraData","gasLimit","gasUsed","timestamp","transactions","uncles","Transaction","ethTx","blockHash","blockNumber","transactionIndex","from","to","gas","gasPrice","input","TxLogs","ethTxLogs","data","topics","logIndex","transactionHash","TxReceipt","ethTxReceipt","status","root","contractAddress","cumulativeGasUsed","logs","map","log","TxObject","tx","topic","checksumAddress","string","chars","sign","hasPrefix","padding","Array","fromCharCode","utf8.decode","substring","returnType","indexOf","toTwos"],"mappings":"oUAOA,SAAAA,EAAqBC,GACnB,OACEA,aAAkBC,GACjBD,GAAUA,EAAOE,aAA2C,OAA5BF,EAAOE,YAAYC,KAUxD,SAAAC,EAA4BJ,GAC1B,OACEA,GAAUA,EAAOE,aAA2C,cAA5BF,EAAOE,YAAYC,KAQvD,SAAAE,EAAqBC,GACnB,IACE,OAyBJ,SAAoBC,GAClB,GAAmB,iBAARA,GAAmC,iBAARA,EAAkB,CACtD,IAAIC,EAAa,IAAIP,EAAG,GAClBQ,EAAkBC,OAAOH,GAC5BI,cACAC,OACGC,EAC6B,OAAjCJ,EAAgBK,OAAO,EAAG,IACO,QAAjCL,EAAgBK,OAAO,EAAG,GACxBC,EAAYC,EAAeP,GAO/B,GAN+B,MAA3BM,EAAUD,OAAO,EAAG,KACtBC,EAAYC,EAAeD,EAAUE,MAAM,IAC3CT,EAAa,IAAIP,GAAI,EAAG,OAE1Bc,EAA0B,KAAdA,EAAmB,IAAMA,GAGvBG,MAAM,eAAiBH,EAAUG,MAAM,mBACnDH,EAAUG,MAAM,iBACA,IAAfL,GAAuBE,EAAUG,MAAM,kBAExC,OAAO,IAAIjB,EAAGc,EAAW,IAAII,IAAIX,GAGnC,IACGO,EAAUG,MAAM,eAA+B,KAAdH,KACnB,IAAfF,EAEA,OAAO,IAAIZ,EAAGc,EAAW,IAAII,IAAIX,QAE9B,GACU,iBAARD,GACPA,EAAIa,WACFb,EAAS,MAAMA,EAAU,MAGzBA,EAAIa,WAAWF,MAAM,gBACpBX,EAAS,KAAKA,EAAwB,oBAEvC,OAAO,IAAIN,EAAGM,EAAIa,WAAY,IAIlC,MAAM,IAAIC,MAAM,gDAC2BC,KAAKC,UAC5ChB,GACD,qKAvEiBiB,MAAM,KAAMC,WAC9B,MAAOC,GACP,MAAM,IAAIL,MAASK,EAAC,qBAAqBpB,EAAM,MAgFnD,SAAAU,EAAwBW,GACtB,MAAmB,iBAARA,EACFA,EAYX,SAAuBA,GACrB,GAAmB,iBAARA,EACT,MAAM,IAAIN,MACR,2EAA2EM,EAAG,mCAIlF,MAA2B,OAApBA,EAAIV,MAAM,EAAG,GAhBbW,CAAcD,GAAOA,EAAIV,MAAM,GAAKU,EClH7C,IA0ZgBE,EA1ZVC,EAAY,mBAAmBC,MAAM,IACrCC,EAAiB,CAAC,EAAG,IAAK,MAAO,UACjCC,EAAQ,CAAC,EAAG,EAAG,GAAI,IACnBC,GAAK,CACT,EACA,EACA,MACA,EACA,MACA,WACA,WACA,WACA,MACA,EACA,WACA,EACA,WACA,WACA,MACA,WACA,IACA,EACA,IACA,EACA,WACA,EACA,WACA,EACA,WACA,EACA,IACA,WACA,MACA,WACA,MACA,WACA,MACA,WACA,IACA,WACA,MACA,EACA,WACA,WACA,WACA,WACA,MACA,WACA,WACA,EACA,WACA,YAkHIC,EAAI,SAAAC,GACR,IAAIC,EACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GAEF,IAAK5D,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACvBC,EAAKJ,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCK,EAAKL,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCM,EAAKN,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCO,EAAKP,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCQ,EAAKR,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCS,EAAKT,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCU,EAAKV,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IACtCW,EAAKX,EAAE,GAA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","sourcesContent":["import BN from 'bn.js';\r\n/**\r\n * Returns true if object is BN, otherwise false\r\n *\r\n * @method isBN\r\n * @param object\r\n */\r\nexport function isBN(object: Object): boolean {\r\n  return (\r\n    object instanceof BN ||\r\n    (object && object.constructor && object.constructor.name === 'BN')\r\n  );\r\n}\r\n\r\n/**\r\n * Returns true if object is BigNumber, otherwise false\r\n *\r\n * @method isBigNumber\r\n * @param object\r\n */\r\nexport function isBigNumber(object: Object): boolean {\r\n  return (\r\n    object && object.constructor && object.constructor.name === 'BigNumber'\r\n  );\r\n}\r\n\r\n/**\r\n * Takes an input and transforms it into an BN\r\n * @param number, string, HEX string or BN\r\n */\r\nexport function toBN(number: number | string | BN): BN {\r\n  try {\r\n    return numberToBN.apply(null, arguments);\r\n  } catch (e) {\r\n    throw new Error(`${e} + ' Given value: ${number} `);\r\n  }\r\n}\r\n\r\n/**\r\n * Takes and input transforms it into BN and if it is negative value, into two's complement\r\n *\r\n * @method toTwosComplement\r\n * @param number\r\n */\r\nexport function toTwosComplement(number: number | string | BN): string {\r\n  return (\r\n    '0x' +\r\n    toBN(number)\r\n      .toTwos(256)\r\n      .toString(16, 64)\r\n  );\r\n}\r\n\r\n/**\r\n * Convert integer or hex integer numbers to BN.js object instances. Does not supprot decimal numbers.\r\n * @param arg\r\n */\r\nfunction numberToBN(arg: string | number | object) {\r\n  if (typeof arg === 'string' || typeof arg === 'number') {\r\n    let multiplier = new BN(1);\r\n    const formattedString = String(arg)\r\n      .toLowerCase()\r\n      .trim();\r\n    const isPrefixed =\r\n      formattedString.substr(0, 2) === '0x' ||\r\n      formattedString.substr(0, 3) === '-0x';\r\n    let stringArg = stripHexPrefix(formattedString);\r\n    if (stringArg.substr(0, 1) === '-') {\r\n      stringArg = stripHexPrefix(stringArg.slice(1));\r\n      multiplier = new BN(-1, 10);\r\n    }\r\n    stringArg = stringArg === '' ? '0' : stringArg;\r\n\r\n    if (\r\n      (!stringArg.match(/^-?[0-9]+$/) && stringArg.match(/^[0-9A-Fa-f]+$/)) ||\r\n      stringArg.match(/^[a-fA-F]+$/) ||\r\n      (isPrefixed === true && stringArg.match(/^[0-9A-Fa-f]+$/))\r\n    ) {\r\n      return new BN(stringArg, 16).mul(multiplier);\r\n    }\r\n\r\n    if (\r\n      (stringArg.match(/^-?[0-9]+$/) || stringArg === '') &&\r\n      isPrefixed === false\r\n    ) {\r\n      return new BN(stringArg, 10).mul(multiplier);\r\n    }\r\n  } else if (\r\n    typeof arg === 'object' &&\r\n    arg.toString &&\r\n    (!arg['pop'] && !arg['push'])\r\n  ) {\r\n    if (\r\n      arg.toString().match(/^-?[0-9]+$/) &&\r\n      (arg['mul'] || arg['dividedToIntegerBy'])\r\n    ) {\r\n      return new BN(arg.toString(), 10);\r\n    }\r\n  }\r\n\r\n  throw new Error(`\r\n    [number-to-bn] while converting number ${JSON.stringify(\r\n      arg\r\n    )} to BN.js instance,\r\n    error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance.\r\n    Note, decimals are not supported.\r\n  `);\r\n}\r\n\r\n/**\r\n * Removes '0x' from a given `String` if present\r\n * @param str the string value\r\n * @return a string by pass if necessary\r\n */\r\nfunction stripHexPrefix(str?: string): string {\r\n  if (typeof str !== 'string') {\r\n    return str;\r\n  }\r\n\r\n  return isHexPrefixed(str) ? str.slice(2) : str;\r\n}\r\n\r\n/**\r\n * Returns a `Boolean` on whether or not the a `String` starts with '0x'\r\n * @param str the string input value\r\n * @return  a boolean if it is or is not hex prefixed\r\n * @throws if the str input is not a string\r\n */\r\nfunction isHexPrefixed(str: string): boolean {\r\n  if (typeof str !== 'string') {\r\n    throw new Error(\r\n      `[is-hex-prefixed] value must be type 'string', is currently type ${typeof str}, while checking isHexPrefixed.`\r\n    );\r\n  }\r\n\r\n  return str.slice(0, 2) === '0x';\r\n}\r\n","/**\r\n * Code from eth-lib/lib/hash\r\n * https://github.com/MaiaVictor/eth-lib/blob/master/lib/hash.js#L11\r\n */\r\n\r\nconst HEX_CHARS = '0123456789abcdef'.split('');\r\nconst KECCAK_PADDING = [1, 256, 65536, 16777216];\r\nconst SHIFT = [0, 8, 16, 24];\r\nconst RC = [\r\n  1,\r\n  0,\r\n  32898,\r\n  0,\r\n  32906,\r\n  2147483648,\r\n  2147516416,\r\n  2147483648,\r\n  32907,\r\n  0,\r\n  2147483649,\r\n  0,\r\n  2147516545,\r\n  2147483648,\r\n  32777,\r\n  2147483648,\r\n  138,\r\n  0,\r\n  136,\r\n  0,\r\n  2147516425,\r\n  0,\r\n  2147483658,\r\n  0,\r\n  2147516555,\r\n  0,\r\n  139,\r\n  2147483648,\r\n  32905,\r\n  2147483648,\r\n  32771,\r\n  2147483648,\r\n  32770,\r\n  2147483648,\r\n  128,\r\n  2147483648,\r\n  32778,\r\n  0,\r\n  2147483658,\r\n  2147483648,\r\n  2147516545,\r\n  2147483648,\r\n  32896,\r\n  2147483648,\r\n  2147483649,\r\n  0,\r\n  2147516424,\r\n  2147483648\r\n];\r\n\r\nconst Keccak = bits => ({\r\n  blocks: [],\r\n  reset: true,\r\n  block: 0,\r\n  start: 0,\r\n  blockCount: (1600 - (bits << 1)) >> 5,\r\n  outputBlocks: bits >> 5,\r\n  s: (s => [].concat(s, s, s, s, s))([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\r\n});\r\n\r\nconst update = (state, message) => {\r\n  const length = message.length,\r\n    blocks = state.blocks,\r\n    byteCount = state.blockCount << 2,\r\n    blockCount = state.blockCount,\r\n    outputBlocks = state.outputBlocks,\r\n    s = state.s;\r\n  let index = 0,\r\n    i,\r\n    code;\r\n\r\n  // update\r\n  while (index < length) {\r\n    if (state.reset) {\r\n      state.reset = false;\r\n      blocks[0] = state.block;\r\n      for (i = 1; i < blockCount + 1; ++i) {\r\n        blocks[i] = 0;\r\n      }\r\n    }\r\n    if (typeof message !== 'string') {\r\n      for (i = state.start; index < length && i < byteCount; ++index) {\r\n        blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\r\n      }\r\n    } else {\r\n      for (i = state.start; index < length && i < byteCount; ++index) {\r\n        code = message.charCodeAt(index);\r\n        if (code < 0x80) {\r\n          blocks[i >> 2] |= code << SHIFT[i++ & 3];\r\n        } else if (code < 0x800) {\r\n          blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\r\n          blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\r\n        } else if (code < 0xd800 || code >= 0xe000) {\r\n          blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\r\n          blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\r\n          blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\r\n        } else {\r\n          code =\r\n            0x10000 +\r\n            (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\r\n          blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\r\n          blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\r\n          blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\r\n          blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\r\n        }\r\n      }\r\n    }\r\n    state.lastByteIndex = i;\r\n    if (i >= byteCount) {\r\n      state.start = i - byteCount;\r\n      state.block = blocks[blockCount];\r\n      for (i = 0; i < blockCount; ++i) {\r\n        s[i] ^= blocks[i];\r\n      }\r\n      f(s);\r\n      state.reset = true;\r\n    } else {\r\n      state.start = i;\r\n    }\r\n  }\r\n\r\n  // finalize\r\n  i = state.lastByteIndex;\r\n  blocks[i >> 2] |= KECCAK_PADDING[i & 3];\r\n  if (state.lastByteIndex === byteCount) {\r\n    blocks[0] = blocks[blockCount];\r\n    for (i = 1; i < blockCount + 1; ++i) {\r\n      blocks[i] = 0;\r\n    }\r\n  }\r\n  blocks[blockCount - 1] |= 0x80000000;\r\n  for (i = 0; i < blockCount; ++i) {\r\n    s[i] ^= blocks[i];\r\n  }\r\n  f(s);\r\n\r\n  // toString\r\n  let hex = '',\r\n    j = 0,\r\n    block;\r\n  while (j < outputBlocks) {\r\n    for (i = 0; i < blockCount && j < outputBlocks; ++i, ++j) {\r\n      block = s[i];\r\n      hex +=\r\n        HEX_CHARS[(block >> 4) & 0x0f] +\r\n        HEX_CHARS[block & 0x0f] +\r\n        HEX_CHARS[(block >> 12) & 0x0f] +\r\n        HEX_CHARS[(block >> 8) & 0x0f] +\r\n        HEX_CHARS[(block >> 20) & 0x0f] +\r\n        HEX_CHARS[(block >> 16) & 0x0f] +\r\n        HEX_CHARS[(block >> 28) & 0x0f] +\r\n        HEX_CHARS[(block >> 24) & 0x0f];\r\n    }\r\n    if (j % blockCount === 0) {\r\n      f(s);\r\n      i = 0;\r\n    }\r\n  }\r\n  return '0x' + hex;\r\n};\r\n\r\nconst f = s => {\r\n  let h,\r\n    l,\r\n    n,\r\n    c0,\r\n    c1,\r\n    c2,\r\n    c3,\r\n    c4,\r\n    c5,\r\n    c6,\r\n    c7,\r\n    c8,\r\n    c9,\r\n    b0,\r\n    b1,\r\n    b2,\r\n    b3,\r\n    b4,\r\n    b5,\r\n    b6,\r\n    b7,\r\n    b8,\r\n    b9,\r\n    b10,\r\n    b11,\r\n    b12,\r\n    b13,\r\n    b14,\r\n    b15,\r\n    b16,\r\n    b17,\r\n    b18,\r\n    b19,\r\n    b20,\r\n    b21,\r\n    b22,\r\n    b23,\r\n    b24,\r\n    b25,\r\n    b26,\r\n    b27,\r\n    b28,\r\n    b29,\r\n    b30,\r\n    b31,\r\n    b32,\r\n    b33,\r\n    b34,\r\n    b35,\r\n    b36,\r\n    b37,\r\n    b38,\r\n    b39,\r\n    b40,\r\n    b41,\r\n    b42,\r\n    b43,\r\n    b44,\r\n    b45,\r\n    b46,\r\n    b47,\r\n    b48,\r\n    b49;\r\n\r\n  for (n = 0; n < 48; n += 2) {\r\n    c0 = s[0] ^ s[10] ^ s[20] ^ s[30] ^ s[40];\r\n    c1 = s[1] ^ s[11] ^ s[21] ^ s[31] ^ s[41];\r\n    c2 = s[2] ^ s[12] ^ s[22] ^ s[32] ^ s[42];\r\n    c3 = s[3] ^ s[13] ^ s[23] ^ s[33] ^ s[43];\r\n    c4 = s[4] ^ s[14] ^ s[24] ^ s[34] ^ s[44];\r\n    c5 = s[5] ^ s[15] ^ s[25] ^ s[35] ^ s[45];\r\n    c6 = s[6] ^ s[16] ^ s[26] ^ s[36] ^ s[46];\r\n    c7 = s[7] ^ s[17] ^ s[27] ^ s[37] ^ s[47];\r\n    c8 = s[8] ^ s[18] ^ s[28] ^ s[38] ^ s[48];\r\n    c9 = s[9] ^ s[19] ^ s[29] ^ s[39] ^ s[49];\r\n\r\n    h = c8 ^ ((c2 << 1) | (c3 >>> 31));\r\n    l = c9 ^ ((c3 << 1) | (c2 >>> 31));\r\n    s[0] ^= h;\r\n    s[1] ^= l;\r\n    s[10] ^= h;\r\n    s[11] ^= l;\r\n    s[20] ^= h;\r\n    s[21] ^= l;\r\n    s[30] ^= h;\r\n    s[31] ^= l;\r\n    s[40] ^= h;\r\n    s[41] ^= l;\r\n    h = c0 ^ ((c4 << 1) | (c5 >>> 31));\r\n    l = c1 ^ ((c5 << 1) | (c4 >>> 31));\r\n    s[2] ^= h;\r\n    s[3] ^= l;\r\n    s[12] ^= h;\r\n    s[13] ^= l;\r\n    s[22] ^= h;\r\n    s[23] ^= l;\r\n    s[32] ^= h;\r\n    s[33] ^= l;\r\n    s[42] ^= h;\r\n    s[43] ^= l;\r\n    h = c2 ^ ((c6 << 1) | (c7 >>> 31));\r\n    l = c3 ^ ((c7 << 1) | (c6 >>> 31));\r\n    s[4] ^= h;\r\n    s[5] ^= l;\r\n    s[14] ^= h;\r\n    s[15] ^= l;\r\n    s[24] ^= h;\r\n    s[25] ^= l;\r\n    s[34] ^= h;\r\n    s[35] ^= l;\r\n    s[44] ^= h;\r\n    s[45] ^= l;\r\n    h = c4 ^ ((c8 << 1) | (c9 >>> 31));\r\n    l = c5 ^ ((c9 << 1) | (c8 >>> 31));\r\n    s[6] ^= h;\r\n    s[7] ^= l;\r\n    s[16] ^= h;\r\n    s[17] ^= l;\r\n    s[26] ^= h;\r\n    s[27] ^= l;\r\n    s[36] ^= h;\r\n    s[37] ^= l;\r\n    s[46] ^= h;\r\n    s[47] ^= l;\r\n    h = c6 ^ ((c0 << 1) | (c1 >>> 31));\r\n    l = c7 ^ ((c1 << 1) | (c0 >>> 31));\r\n    s[8] ^= h;\r\n    s[9] ^= l;\r\n    s[18] ^= h;\r\n    s[19] ^= l;\r\n    s[28] ^= h;\r\n    s[29] ^= l;\r\n    s[38] ^= h;\r\n    s[39] ^= l;\r\n    s[48] ^= h;\r\n    s[49] ^= l;\r\n\r\n    b0 = s[0];\r\n    b1 = s[1];\r\n    b32 = (s[11] << 4) | (s[10] >>> 28);\r\n    b33 = (s[10] << 4) | (s[11] >>> 28);\r\n    b14 = (s[20] << 3) | (s[21] >>> 29);\r\n    b15 = (s[21] << 3) | (s[20] >>> 29);\r\n    b46 = (s[31] << 9) | (s[30] >>> 23);\r\n    b47 = (s[30] << 9) | (s[31] >>> 23);\r\n    b28 = (s[40] << 18) | (s[41] >>> 14);\r\n    b29 = (s[41] << 18) | (s[40] >>> 14);\r\n    b20 = (s[2] << 1) | (s[3] >>> 31);\r\n    b21 = (s[3] << 1) | (s[2] >>> 31);\r\n    b2 = (s[13] << 12) | (s[12] >>> 20);\r\n    b3 = (s[12] << 12) | (s[13] >>> 20);\r\n    b34 = (s[22] << 10) | (s[23] >>> 22);\r\n    b35 = (s[23] << 10) | (s[22] >>> 22);\r\n    b16 = (s[33] << 13) | (s[32] >>> 19);\r\n    b17 = (s[32] << 13) | (s[33] >>> 19);\r\n    b48 = (s[42] << 2) | (s[43] >>> 30);\r\n    b49 = (s[43] << 2) | (s[42] >>> 30);\r\n    b40 = (s[5] << 30) | (s[4] >>> 2);\r\n    b41 = (s[4] << 30) | (s[5] >>> 2);\r\n    b22 = (s[14] << 6) | (s[15] >>> 26);\r\n    b23 = (s[15] << 6) | (s[14] >>> 26);\r\n    b4 = (s[25] << 11) | (s[24] >>> 21);\r\n    b5 = (s[24] << 11) | (s[25] >>> 21);\r\n    b36 = (s[34] << 15) | (s[35] >>> 17);\r\n    b37 = (s[35] << 15) | (s[34] >>> 17);\r\n    b18 = (s[45] << 29) | (s[44] >>> 3);\r\n    b19 = (s[44] << 29) | (s[45] >>> 3);\r\n    b10 = (s[6] << 28) | (s[7] >>> 4);\r\n    b11 = (s[7] << 28) | (s[6] >>> 4);\r\n    b42 = (s[17] << 23) | (s[16] >>> 9);\r\n    b43 = (s[16] << 23) | (s[17] >>> 9);\r\n    b24 = (s[26] << 25) | (s[27] >>> 7);\r\n    b25 = (s[27] << 25) | (s[26] >>> 7);\r\n    b6 = (s[36] << 21) | (s[37] >>> 11);\r\n    b7 = (s[37] << 21) | (s[36] >>> 11);\r\n    b38 = (s[47] << 24) | (s[46] >>> 8);\r\n    b39 = (s[46] << 24) | (s[47] >>> 8);\r\n    b30 = (s[8] << 27) | (s[9] >>> 5);\r\n    b31 = (s[9] << 27) | (s[8] >>> 5);\r\n    b12 = (s[18] << 20) | (s[19] >>> 12);\r\n    b13 = (s[19] << 20) | (s[18] >>> 12);\r\n    b44 = (s[29] << 7) | (s[28] >>> 25);\r\n    b45 = (s[28] << 7) | (s[29] >>> 25);\r\n    b26 = (s[38] << 8) | (s[39] >>> 24);\r\n    b27 = (s[39] << 8) | (s[38] >>> 24);\r\n    b8 = (s[48] << 14) | (s[49] >>> 18);\r\n    b9 = (s[49] << 14) | (s[48] >>> 18);\r\n\r\n    s[0] = b0 ^ (~b2 & b4);\r\n    s[1] = b1 ^ (~b3 & b5);\r\n    s[10] = b10 ^ (~b12 & b14);\r\n    s[11] = b11 ^ (~b13 & b15);\r\n    s[20] = b20 ^ (~b22 & b24);\r\n    s[21] = b21 ^ (~b23 & b25);\r\n    s[30] = b30 ^ (~b32 & b34);\r\n    s[31] = b31 ^ (~b33 & b35);\r\n    s[40] = b40 ^ (~b42 & b44);\r\n    s[41] = b41 ^ (~b43 & b45);\r\n    s[2] = b2 ^ (~b4 & b6);\r\n    s[3] = b3 ^ (~b5 & b7);\r\n    s[12] = b12 ^ (~b14 & b16);\r\n    s[13] = b13 ^ (~b15 & b17);\r\n    s[22] = b22 ^ (~b24 & b26);\r\n    s[23] = b23 ^ (~b25 & b27);\r\n    s[32] = b32 ^ (~b34 & b36);\r\n    s[33] = b33 ^ (~b35 & b37);\r\n    s[42] = b42 ^ (~b44 & b46);\r\n    s[43] = b43 ^ (~b45 & b47);\r\n    s[4] = b4 ^ (~b6 & b8);\r\n    s[5] = b5 ^ (~b7 & b9);\r\n    s[14] = b14 ^ (~b16 & b18);\r\n    s[15] = b15 ^ (~b17 & b19);\r\n    s[24] = b24 ^ (~b26 & b28);\r\n    s[25] = b25 ^ (~b27 & b29);\r\n    s[34] = b34 ^ (~b36 & b38);\r\n    s[35] = b35 ^ (~b37 & b39);\r\n    s[44] = b44 ^ (~b46 & b48);\r\n    s[45] = b45 ^ (~b47 & b49);\r\n    s[6] = b6 ^ (~b8 & b0);\r\n    s[7] = b7 ^ (~b9 & b1);\r\n    s[16] = b16 ^ (~b18 & b10);\r\n    s[17] = b17 ^ (~b19 & b11);\r\n    s[26] = b26 ^ (~b28 & b20);\r\n    s[27] = b27 ^ (~b29 & b21);\r\n    s[36] = b36 ^ (~b38 & b30);\r\n    s[37] = b37 ^ (~b39 & b31);\r\n    s[46] = b46 ^ (~b48 & b40);\r\n    s[47] = b47 ^ (~b49 & b41);\r\n    s[8] = b8 ^ (~b0 & b2);\r\n    s[9] = b9 ^ (~b1 & b3);\r\n    s[18] = b18 ^ (~b10 & b12);\r\n    s[19] = b19 ^ (~b11 & b13);\r\n    s[28] = b28 ^ (~b20 & b22);\r\n    s[29] = b29 ^ (~b21 & b23);\r\n    s[38] = b38 ^ (~b30 & b32);\r\n    s[39] = b39 ^ (~b31 & b33);\r\n    s[48] = b48 ^ (~b40 & b42);\r\n    s[49] = b49 ^ (~b41 & b43);\r\n\r\n    s[0] ^= RC[n];\r\n    s[1] ^= RC[n + 1];\r\n  }\r\n};\r\n\r\nconst keccak = (bits: number) => {\r\n  /**\r\n   * If str is a string it must have '0x'\r\n   */\r\n  return (str: string | Buffer) => {\r\n    let msg;\r\n    if (typeof str === 'string' && str.slice(0, 2) === '0x') {\r\n      msg = [];\r\n      for (let i = 2, l = str.length; i < l; i += 2) {\r\n        msg.push(parseInt(str.slice(i, i + 2), 16));\r\n      }\r\n    } else {\r\n      msg = str;\r\n    }\r\n    return update(Keccak(bits), msg);\r\n  };\r\n};\r\n\r\nexport const keccak256 = keccak(256);\r\n","import * as utf8 from 'utf8';\r\nimport BN from 'bn.js';\r\n\r\nimport { isBigNumber, isBN, toBN } from './bn';\r\nimport { keccak256 } from './keccack';\r\n\r\n/*******************\r\n * ADDRESS\r\n */\r\n\r\n/**\r\n * Checks if the given string is an address\r\n * @method isAddress\r\n * @param address the given HEX address\r\n */\r\nexport function isAddress(address: string): boolean {\r\n  // check if it has the basic requirements of an address\r\n  if (!/^(0x)?[0-9a-f]{40}$/i.test(address)) {\r\n    return false;\r\n    // If it's ALL lowercase or ALL upppercase\r\n  } else if (\r\n    /^(0x|0X)?[0-9a-f]{40}$/.test(address) ||\r\n    /^(0x|0X)?[0-9A-F]{40}$/.test(address)\r\n  ) {\r\n    return true;\r\n    // Otherwise check each case\r\n  } else {\r\n    return checkAddressChecksum(address);\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if the given string is a checksummed address\r\n *\r\n * @method checkAddressChecksum\r\n * @param address the given HEX address\r\n */\r\nexport function checkAddressChecksum(address: string): boolean {\r\n  // Check each case\r\n  address = address.replace(/^0x/i, '');\r\n  const addressHash = sha3(address.toLowerCase()).replace(/^0x/i, '');\r\n\r\n  for (let i = 0; i < 40; i++) {\r\n    // the nth letter should be uppercase if the nth digit of casemap is 1\r\n    if (\r\n      (parseInt(addressHash[i], 16) > 7 &&\r\n        address[i].toUpperCase() !== address[i]) ||\r\n      (parseInt(addressHash[i], 16) <= 7 &&\r\n        address[i].toLowerCase() !== address[i])\r\n    ) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * Converts to a checksum address\r\n *\r\n * @method toChecksumAddress\r\n * @param address the given HEX address\r\n */\r\nexport function toChecksumAddress(address: string): string {\r\n  if (typeof address === 'undefined') {\r\n    return '';\r\n  }\r\n\r\n  if (!/^(0x)?[0-9a-f]{40}$/i.test(address)) {\r\n    throw new Error(\r\n      `Given address ${address} is not a valid Ethereum address.`\r\n    );\r\n  }\r\n\r\n  address = address.toLowerCase().replace(/^0x/i, '');\r\n  const addressHash = sha3(address).replace(/^0x/i, '');\r\n  let checksumAddress = '0x';\r\n\r\n  for (let i = 0; i < address.length; i++) {\r\n    // If ith character is 9 to f then make it uppercase\r\n    if (parseInt(addressHash[i], 16) > 7) {\r\n      checksumAddress += address[i].toUpperCase();\r\n    } else {\r\n      checksumAddress += address[i];\r\n    }\r\n  }\r\n  return checksumAddress;\r\n}\r\n\r\n/**\r\n * Should be called to pad string to expected length\r\n *\r\n * @method leftPad\r\n * @param string to be padded\r\n * @param chars that result string should have\r\n * @param sign, by default 0\r\n * @returns right aligned string\r\n */\r\nexport function leftPad(string: string, chars: number, sign: string): string {\r\n  const hasPrefix = /^0x/i.test(string) || typeof string === 'number';\r\n  string = (string as any).toString(16).replace(/^0x/i, '');\r\n\r\n  const padding =\r\n    chars - string.length + 1 >= 0 ? chars - string.length + 1 : 0;\r\n\r\n  return (\r\n    (hasPrefix ? '0x' : '') +\r\n    new Array(padding).join(sign ? sign : '0') +\r\n    string\r\n  );\r\n}\r\n\r\n/**\r\n * Should be called to pad string to expected length\r\n *\r\n * @method rightPad\r\n * @param string to be padded\r\n * @param chars that result string should have\r\n * @param sign, by default 0\r\n * @returns right aligned string\r\n */\r\nexport function rightPad(string: string, chars: number, sign: string): string {\r\n  const hasPrefix = /^0x/i.test(string) || typeof string === 'number';\r\n  string = (string as any).toString(16).replace(/^0x/i, '');\r\n\r\n  const padding =\r\n    chars - string.length + 1 >= 0 ? chars - string.length + 1 : 0;\r\n\r\n  return (\r\n    (hasPrefix ? '0x' : '') +\r\n    string +\r\n    new Array(padding).join(sign ? sign : '0')\r\n  );\r\n}\r\n\r\n/********************************\r\n * SHA3\r\n */\r\n\r\nconst SHA3_NULL_S =\r\n  '0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';\r\n\r\n/**\r\n * Hashes values to a sha3 hash using keccak 256\r\n * To hash a HEX string the hex must have 0x in front.\r\n * @method sha3\r\n * @return the sha3 string\r\n */\r\nexport function sha3(value: string) {\r\n  if (isHexStrict(value) && /^0x/i.test(value.toString())) {\r\n    value = hexToBytes(value) as string;\r\n  }\r\n\r\n  const returnValue = keccak256(value);\r\n\r\n  if (returnValue === SHA3_NULL_S) {\r\n    return null;\r\n  } else {\r\n    return returnValue;\r\n  }\r\n}\r\n\r\n/************************************\r\n * HEX\r\n */\r\n\r\n/**\r\n * Should be called to get hex representation (prefixed by 0x) of utf8 string\r\n *\r\n * @method utf8ToHex\r\n * @param str\r\n * @returns hex representation of input string\r\n */\r\nexport function utf8ToHex(str: string): string {\r\n  str = utf8.encode(str);\r\n  let hex = '';\r\n\r\n  // remove \\u0000 padding from either side\r\n  str = str.replace(/^(?:\\u0000)*/, '');\r\n  str = str\r\n    .split('')\r\n    .reverse()\r\n    .join('');\r\n  str = str.replace(/^(?:\\u0000)*/, '');\r\n  str = str\r\n    .split('')\r\n    .reverse()\r\n    .join('');\r\n\r\n  for (let i = 0; i < str.length; i++) {\r\n    const code = str.charCodeAt(i);\r\n    // if (code !== 0) {\r\n    const n = code.toString(16);\r\n    hex += n.length < 2 ? '0' + n : n;\r\n    // }\r\n  }\r\n\r\n  return '0x' + hex;\r\n}\r\n\r\n/**\r\n * Should be called to get utf8 from it's hex representation\r\n * @method hexToUtf8\r\n * @param hex\r\n */\r\nexport function hexToUtf8(hex: string): string {\r\n  if (!isHexStrict(hex)) {\r\n    throw new Error(`The parameter ${hex} must be a valid HEX string.`);\r\n  }\r\n  let str = '';\r\n  let code = 0;\r\n  hex = hex.replace(/^0x/i, '');\r\n\r\n  // remove 00 padding from either side\r\n  hex = hex.replace(/^(?:00)*/, '');\r\n  hex = hex\r\n    .split('')\r\n    .reverse()\r\n    .join('');\r\n  hex = hex.replace(/^(?:00)*/, '');\r\n  hex = hex\r\n    .split('')\r\n    .reverse()\r\n    .join('');\r\n\r\n  const l = hex.length;\r\n\r\n  for (let i = 0; i < l; i += 2) {\r\n    code = parseInt(hex.substr(i, 2), 16);\r\n    // if (code !== 0) {\r\n    str += String.fromCharCode(code);\r\n    // }\r\n  }\r\n\r\n  return utf8.decode(str);\r\n}\r\n\r\n/**\r\n * Converts value to it's number representation\r\n * @method hexToNumber\r\n * @param value\r\n */\r\nexport function hexToNumber(value: string | number | BN): number {\r\n  if (!value) {\r\n    return value;\r\n  }\r\n\r\n  return new BN(value, 16).toNumber();\r\n}\r\n\r\n/**\r\n * Converts value to it's decimal representation in string\r\n * @method hexToNumberString\r\n * @param value\r\n */\r\nexport function hexToNumberString(value: string | number | BN): string {\r\n  if (!value) {\r\n    return value;\r\n  }\r\n\r\n  return new BN(value, 16).toString(10);\r\n}\r\n\r\n/**\r\n * Converts value to it's hex representation\r\n * @method numberToHex\r\n * @param value\r\n */\r\nexport function numberToHex(value: String | Number | BN): string {\r\n  if (typeof value === 'undefined' || value === 'null') {\r\n    return value;\r\n  }\r\n\r\n  if (!isFinite(value) && !isHexStrict(value)) {\r\n    throw new Error(`Given input ${value} is not a number.`);\r\n  }\r\n\r\n  const number = toBN(value);\r\n  const result = number.toString(16);\r\n\r\n  return number.lt(new BN(0)) ? '-0x' + result.substr(1) : '0x' + result;\r\n}\r\n\r\n/**\r\n * Convert a byte array to a hex string\r\n * Note: Implementation from crypto-js\r\n * @method bytesToHex\r\n * @param bytes\r\n * @return the hex string\r\n */\r\nexport function bytesToHex(bytes: number[]): string {\r\n  const hex = [];\r\n  for (let i = 0; i < bytes.length; i++) {\r\n    /* tslint:disable */\r\n    hex.push((bytes[i] >>> 4).toString(16));\r\n    hex.push((bytes[i] & 0xf).toString(16));\r\n    /* tslint:enable  */\r\n  }\r\n  return '0x' + hex.join('');\r\n}\r\n\r\n/**\r\n * Convert a hex string to a byte array\r\n * Note: Implementation from crypto-js\r\n * @method hexToBytes\r\n * @param hex\r\n * @return the byte array\r\n */\r\nexport function hexToBytes(hex: string): number[] | string {\r\n  hex = (hex as any).toString(16);\r\n\r\n  if (!isHexStrict(hex)) {\r\n    throw new Error(`Given value ${hex} is not a valid hex string.`);\r\n  }\r\n\r\n  hex = hex.replace(/^0x/i, '');\r\n  const bytes = [];\r\n  for (let c = 0; c < hex.length; c += 2) {\r\n    bytes.push(parseInt(hex.substr(c, 2), 16));\r\n  }\r\n  return bytes;\r\n}\r\n\r\n/**\r\n * Should be called to get ascii from it's hex representation\r\n *\r\n * @method hexToAscii\r\n * @param hex\r\n * @returns ascii string representation of hex value\r\n */\r\nexport function hexToAscii(hex: string): string {\r\n  if (!isHexStrict(hex)) {\r\n    throw new Error('The parameter must be a valid HEX string.');\r\n  }\r\n\r\n  let str = '';\r\n  let i = 0;\r\n  const l = hex.length;\r\n  if (hex.substring(0, 2) === '0x') {\r\n    i = 2;\r\n  }\r\n  for (; i < l; i += 2) {\r\n    const code = parseInt(hex.substr(i, 2), 16);\r\n    str += String.fromCharCode(code);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n/**\r\n * Should be called to get hex representation (prefixed by 0x) of ascii string\r\n *\r\n * @method asciiToHex\r\n * @param str\r\n * @returns hex representation of input string\r\n */\r\nexport function asciiToHex(str: string): string {\r\n  if (!str) {\r\n    return '0x00';\r\n  }\r\n  let hex = '';\r\n  for (let i = 0; i < str.length; i++) {\r\n    const code = str.charCodeAt(i);\r\n    const n = code.toString(16);\r\n    hex += n.length < 2 ? '0' + n : n;\r\n  }\r\n\r\n  return '0x' + hex;\r\n}\r\n\r\n/**\r\n * Auto converts any given value into it's hex representation.\r\n *\r\n * And even stringifys objects before.\r\n *\r\n * @method toHex\r\n * @param value\r\n * @param returnType\r\n */\r\nexport function toHex(\r\n  value: String | Number | BN | Object,\r\n  returnType?: boolean\r\n): string {\r\n  /*jshint maxcomplexity: false */\r\n\r\n  if (isAddress(value)) {\r\n    return returnType\r\n      ? 'address'\r\n      : '0x' + value.toLowerCase().replace(/^0x/i, '');\r\n  }\r\n\r\n  if (typeof value === 'boolean') {\r\n    return returnType ? 'bool' : value ? '0x01' : '0x00';\r\n  }\r\n\r\n  if (typeof value === 'object' && !isBigNumber(value) && !isBN(value)) {\r\n    return returnType ? 'string' : utf8ToHex(JSON.stringify(value));\r\n  }\r\n\r\n  // if its a negative number, pass it through numberToHex\r\n  if (typeof value === 'string') {\r\n    if (value.indexOf('-0x') === 0 || value.indexOf('-0X') === 0) {\r\n      return returnType ? 'int256' : numberToHex(value);\r\n    } else if (value.indexOf('0x') === 0 || value.indexOf('0X') === 0) {\r\n      return returnType ? 'bytes' : value;\r\n    } else if (!isFinite(value as any)) {\r\n      return returnType ? 'string' : utf8ToHex(value);\r\n    }\r\n  }\r\n\r\n  return returnType ? (value < 0 ? 'int256' : 'uint256') : numberToHex(value);\r\n}\r\n\r\n/**\r\n * Check if string is HEX, requires a 0x in front\r\n *\r\n * @method isHexStrict\r\n * @param hex to be checked\r\n */\r\nexport function isHexStrict(hex: string): boolean {\r\n  return (\r\n    typeof hex === 'string' ||\r\n    (typeof hex === 'number' && /^(-)?0x[0-9a-f]*$/i.test(hex))\r\n  );\r\n}\r\n\r\n/**\r\n * Check if string is HEX\r\n *\r\n * @method isHex\r\n * @param hex to be checked\r\n */\r\nexport function isHex(hex: string): boolean {\r\n  return (\r\n    typeof hex === 'string' ||\r\n    (typeof hex === 'number' && /^(-0x|0x)?[0-9a-f]*$/i.test(hex))\r\n  );\r\n}\r\n","import { hexToNumber } from '../utils';\r\n\r\nexport interface IBlock {\r\n  /** the block number. null when its pending block. */\r\n  number: number;\r\n  /** hash of the block. null when its pending block. */\r\n  hash: string;\r\n  /** hash of the parent block. */\r\n  parentHash: string;\r\n  /** hash of the generated proof-of-work. null when its pending block. */\r\n  nonce: string;\r\n  /** SHA3 of the uncles data in the block. */\r\n  sha3Uncles: string;\r\n  /** the bloom filter for the logs of the block. null when its pending block. */\r\n  logsBloom: string;\r\n  /** the root of the transaction trie of the block. */\r\n  transactionsRoot: string;\r\n  /** the root of the final state trie of the block. */\r\n  stateRoot: string;\r\n  /** the root of the receipts trie of the block. */\r\n  receiptsRoot: string;\r\n  /** the address of the beneficiary to whom the mining rewards were given. */\r\n  miner: string;\r\n  /** integer of the difficulty for this block. */\r\n  difficulty: number;\r\n  /**  integer of the total difficulty of the chain until this block. */\r\n  totalDifficulty: number;\r\n  /** integer the size of this block in bytes. */\r\n  size: number;\r\n  /** the \"extra data\" field of this block. */\r\n  extraData: string;\r\n  /** the maximum gas allowed in this block. */\r\n  gasLimit: number;\r\n  /** the total used gas by all transactions in this block. */\r\n  gasUsed: number;\r\n  /** the unix timestamp for when the block was collated. */\r\n  timestamp: number;\r\n  /** Array of transaction objects, or 32 Bytes transaction hashes depending on the last given parameter. */\r\n  transactions: string[];\r\n  /** Array of uncle hashes. */\r\n  uncles: string[];\r\n}\r\n\r\nexport class Block implements IBlock {\r\n  number: number;\r\n  hash: string;\r\n  parentHash: string;\r\n  nonce: string;\r\n  sha3Uncles: string;\r\n  logsBloom: string;\r\n  transactionsRoot: string;\r\n  stateRoot: string;\r\n  receiptsRoot: string;\r\n  miner: string;\r\n  difficulty: number;\r\n  totalDifficulty: number;\r\n  size: number;\r\n  extraData: string;\r\n  gasLimit: number;\r\n  gasUsed: number;\r\n  timestamp: number;\r\n  transactions: string[];\r\n  uncles: string[];\r\n\r\n  constructor(ethBlock) {\r\n    this.number = hexToNumber(ethBlock.number);\r\n    this.hash = ethBlock.hash;\r\n    this.parentHash = ethBlock.parentHash;\r\n    this.nonce = ethBlock.nonce;\r\n    this.sha3Uncles = ethBlock.sha3Uncles;\r\n    this.logsBloom = ethBlock.logsBloom;\r\n    this.transactionsRoot = ethBlock.transactionsRoot;\r\n    this.stateRoot = ethBlock.stateRoot;\r\n    this.receiptsRoot = ethBlock.receiptsRoot;\r\n    this.miner = ethBlock.miner;\r\n    this.difficulty = hexToNumber(ethBlock.difficulty);\r\n    this.totalDifficulty = hexToNumber(ethBlock.totalDifficulty);\r\n    this.size = hexToNumber(ethBlock.size);\r\n    this.extraData = ethBlock.extraData;\r\n    this.gasLimit = hexToNumber(ethBlock.gasLimit);\r\n    this.gasUsed = hexToNumber(ethBlock.gasUsed);\r\n    this.timestamp = hexToNumber(ethBlock.timestamp);\r\n    this.transactions = ethBlock.transactions;\r\n    this.uncles = ethBlock.uncles;\r\n  }\r\n}\r\n","import { hexToNumber, toBN } from '../utils';\r\n\r\nexport interface ITransaction {\r\n  /** hash of the transaction. */\r\n  hash: string;\r\n  /** The number of transactions made by the sender prior to this one. */\r\n  nonce: number;\r\n  /** Hash of the block where this transaction was in. null when its pending. */\r\n  blockHash: string;\r\n  /** Block number where this transaction was in. null when its pending. */\r\n  blockNumber: number;\r\n  /** Integer of the transactions index position in the block. null when its pending. */\r\n  transactionIndex: number;\r\n  /** Address of the sender. */\r\n  from: string;\r\n  /** Address of the receiver. null when its a contract creation transaction. */\r\n  to: string;\r\n  /** BigNumber::value transferred in Wei  */\r\n  value: string;\r\n  /** Gas provided by the sender. */\r\n  gas: number;\r\n  /** Gas price provided by the sender in Wei. */\r\n  gasPrice: number;\r\n  /** The data send along with the transaction. */\r\n  input: string;\r\n}\r\n\r\nexport class Transaction implements ITransaction {\r\n  hash: string;\r\n  nonce: number;\r\n  blockHash: string;\r\n  blockNumber: number;\r\n  transactionIndex: number;\r\n  from: string;\r\n  to: string;\r\n  value: string;\r\n  gas: number;\r\n  gasPrice: number;\r\n  input: string;\r\n\r\n  constructor(ethTx) {\r\n    this.hash = ethTx.hash;\r\n    this.nonce = hexToNumber(ethTx.nonce);\r\n    this.blockHash = ethTx.blockHash;\r\n    this.blockNumber = hexToNumber(ethTx.blockNumber);\r\n    this.transactionIndex = hexToNumber(ethTx.transactionIndex);\r\n    this.from = ethTx.from;\r\n    this.to = ethTx.to;\r\n    this.value = toBN(ethTx.value).toString(10);\r\n    this.gas = hexToNumber(ethTx.gas);\r\n    this.gasPrice = hexToNumber(ethTx.gasPrice);\r\n    this.input = ethTx.input;\r\n  }\r\n}\r\n","import { hexToNumber } from '../utils';\r\n\r\nexport interface ITxLogs {\r\n  /**  contains one or more 32 Bytes non-indexed arguments of the log. */\r\n  data: string;\r\n  /** Array of 0 to 4 32-Bytes of indexed log arguments. (In solidity: The first topic is the hash of the signature of the event */\r\n  topics: string[];\r\n  /** integer of the log index position in the block. null when its pending log. */\r\n  logIndex: number;\r\n  /** integer of the transactions index position log was created from. null when its pending log. */\r\n  transactionIndex: number;\r\n  /** hash of the transactions this log was created from. null when its pending log. */\r\n  transactionHash: string;\r\n  /** hash of the block where this log was in. null when its pending. null when its pending log. */\r\n  blockHash: string;\r\n  /** the block number where this log was in. null when its pending. null when its pending log. */\r\n  blockNumber: number;\r\n  /** address from which this log originated. */\r\n  address: string;\r\n}\r\n\r\nexport class TxLogs {\r\n  data: string;\r\n  topics: string[];\r\n  logIndex: number;\r\n  transactionIndex: number;\r\n  transactionHash: string;\r\n  blockHash: string;\r\n  blockNumber: number;\r\n  address: string;\r\n\r\n  constructor(ethTxLogs) {\r\n    this.data = ethTxLogs.data;\r\n    this.topics = ethTxLogs.topics;\r\n    this.logIndex = hexToNumber(ethTxLogs.logIndex);\r\n    this.transactionIndex = hexToNumber(ethTxLogs.transactionIndex);\r\n    this.transactionHash = ethTxLogs.transactionHash;\r\n    this.blockHash = ethTxLogs.blockHash;\r\n    this.blockNumber = hexToNumber(ethTxLogs.blockNumber);\r\n    this.address = ethTxLogs.address;\r\n  }\r\n}\r\n","import { ITxLogs, TxLogs } from './tx-logs';\r\nimport { hexToNumber } from '../utils';\r\n\r\nexport interface ITxReceipt {\r\n  /** 32 bytes of post-transaction stateroot (pre Byzantium)  */\r\n  root?: string;\r\n  /** success or failure */\r\n  status?: boolean;\r\n  /**  hash of the transaction */\r\n  transactionHash: string;\r\n  /** integer of the transactions index position in the block. */\r\n  transactionIndex: number;\r\n  /** hash of the block where this transaction was in. */\r\n  blockHash: string;\r\n  /** block number where this transaction was in. */\r\n  blockNumber: number;\r\n  /** The contract address created, if the transaction was a contract creation, otherwise null. */\r\n  contractAddress: string;\r\n  /** The total amount of gas used when this transaction was executed in the block. */\r\n  cumulativeGasUsed: number;\r\n  /** The amount of gas used by this specific transaction alone. */\r\n  gasUsed: number;\r\n  /** Array of log objects, which this transaction generated. */\r\n  logs: ITxLogs[];\r\n  /**  Bloom filter for light clients to quickly retrieve related logs. */\r\n  logsBloom: string;\r\n}\r\n\r\nexport class TxReceipt {\r\n  root?: string;\r\n  status?: boolean;\r\n  transactionHash: string;\r\n  transactionIndex: number;\r\n  blockHash: string;\r\n  blockNumber: number;\r\n  contractAddress: string;\r\n  cumulativeGasUsed: number;\r\n  gasUsed: number;\r\n  logs: ITxLogs[];\r\n  logsBloom: string;\r\n\r\n  constructor(ethTxReceipt) {\r\n    if (ethTxReceipt.status) {\r\n      this.status = hexToNumber(ethTxReceipt.status) === 1 ? true : false;\r\n    } else {\r\n      this.root = ethTxReceipt.root;\r\n    }\r\n    this.transactionHash = ethTxReceipt.transactionHash;\r\n    this.transactionIndex = hexToNumber(ethTxReceipt.transactionIndex);\r\n    this.blockHash = ethTxReceipt.blockHash;\r\n    this.blockNumber = hexToNumber(ethTxReceipt.blockNumber);\r\n    this.contractAddress = ethTxReceipt.contractAddress;\r\n    this.cumulativeGasUsed = hexToNumber(ethTxReceipt.cumulativeGasUsed);\r\n    this.gasUsed = hexToNumber(ethTxReceipt.gasUsed);\r\n    this.logs = ethTxReceipt.logs.map(log => new TxLogs(log));\r\n    this.logsBloom = ethTxReceipt.logsBloom;\r\n  }\r\n}\r\n","import { BN } from 'bn.js';\r\n\r\nexport interface ITxObject {\r\n    /** The address the transaction is send from. */\r\n    from: string;\r\n    /** The address the transaction is directed to. */\r\n    to: string;\r\n    /** (default: 90000) Integer of the gas provided for the transaction execution. It will return unused gas. */\r\n    gas: number;\r\n    /** Integer of the gasPrice used for each paid gas */\r\n    gasPrice: string;\r\n    /** Integer of the value sent with if (tx transaction */\r\n    value: string;\r\n    /** The compiled code of a contract OR the hash of the invoked method signature and encoded parameters. */\r\n    data: string;\r\n    /** Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce. */\r\n    nonce: number;\r\n}\r\n\r\nexport class TxObject {\r\n  /** The address the transaction is send from. */\r\n  public from: string;\r\n  /** The address the transaction is directed to. */\r\n  public to: string;\r\n  /** (default: 90000) Integer of the gas provided for the transaction execution. It will return unused gas. */\r\n  public gas: string;\r\n  /** Integer of the gasPrice used for each paid gas */\r\n  public gasPrice: string;\r\n  /** Integer of the value sent with if (tx transaction */\r\n  public value: string;\r\n  /** The compiled code of a contract OR the hash of the invoked method signature and encoded parameters. */\r\n  public data: string;\r\n  /** Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce. */\r\n  public nonce: string;\r\n\r\n  constructor(tx: Partial<ITxObject>) {\r\n    if (tx.from) this.from = tx.from;\r\n    if (tx.to) this.to = tx.to;\r\n    if (tx.data) this.data = tx.data;\r\n\r\n    if (tx.gas) this.gas = new BN(tx.gas, 10).toString(16);\r\n    if (tx.gasPrice) this.gasPrice = new BN(tx.gasPrice, 10).toString(16);\r\n    if (tx.value) this.value = new BN(tx.value, 10).toString(16);\r\n    if (tx.nonce) this.nonce = new BN(tx.nonce, 10).toString(16);\r\n\r\n  }\r\n}\r\n","/**\r\n * Returns true if given string is a valid Ethereum block header bloom.\r\n * @method isBloom\r\n * @param hex encoded bloom filter\r\n */\r\nfunction isBloom(bloom: string): boolean {\r\n  if (!/^(0x)?[0-9a-f]{512}$/i.test(bloom)) {\r\n    return false;\r\n  } else if (\r\n    /^(0x)?[0-9a-f]{512}$/.test(bloom) ||\r\n    /^(0x)?[0-9A-F]{512}$/.test(bloom)\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Returns true if given string is a valid log topic.\r\n * @method isTopic\r\n * @param hex encoded topic\r\n */\r\nexport function isTopic(topic: string): boolean {\r\n  if (!/^(0x)?[0-9a-f]{64}$/i.test(topic)) {\r\n    return false;\r\n  } else if (\r\n    /^(0x)?[0-9a-f]{64}$/.test(topic) ||\r\n    /^(0x)?[0-9A-F]{64}$/.test(topic)\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n"]}